## 3. 업무일지 페이지

### 개요

일별 업무를 프로젝트별 또는 단기 업무로 관리하고 타임테이블로 시각화, Discord로 공유

### 기능 요구사항

| 기능                 | 설명                              | 우선순위 |
| -------------------- | --------------------------------- | -------- |
| 프로젝트별 업무 추가 | 프로젝트 선택 후 하위 업무 추가   | P0       |
| 단기 업무 추가       | 프로젝트 없이 독립 업무 추가      | P0       |
| 타임테이블 등록      | 시간대별 업무 블록 배치           | P0       |
| 드래그 앤 드롭       | 체크리스트 → 타임테이블 드래그    | P0       |
| 일별 조회            | 날짜별 업무 조회 (날짜 선택기)    | P0       |
| 업무 통계            | 기록/휴식/완료 시간 실시간 표시   | P1       |
| 공개/비공개          | 타임테이블 공개 여부 설정         | P1       |
| Discord 전송         | 일일 업무일지 Discord 채널로 전송 | P1       |

### 화면 와이어프레임

```
+-----------------------------------------------------------------------------------+
|  업무일지                                                    [ 📤 Discord 전송 ]  |
|  오늘의 업무를 기록하고 관리합니다                                                  |
+-----------------------------------------------------------------------------------+
|                                                                                   |
|  < 2025년 12월 6일 토요일 >                                    [2025. 12. 06. 📅] |
|                                                                                   |
+-----------------------------------------------------------------------------------+
|                                    |                                              |
|  📋 체크리스트                      |  🍅 타임테이블  🔒비공개                     |
|                                    |         기록: 0시간  휴식: 1시간  완료: 0시간 |
|  🔗 타임테이블로 드래그하세요        |                                              |
|                                    |  09:00 ─────────────────────────────────── |
|  ┌─────────────────────────────┐   |                                              |
|  │ 📁 프로젝트 선택...       ▼ │   |  10:00 ─────────────────────────────────── |
|  └─────────────────────────────┘   |                                              |
|  ┌─────────────────────────────┐   |  11:00 ─────────────────────────────────── |
|  │ 업무 내용 입력...           │[+]|                                              |
|  └─────────────────────────────┘   |  12:00 ─────────────────────────────────── |
|                                    |                                              |
|  ─────────── 또는 ───────────     |  13:00 ┌─────────────────────────────────┐ |
|                                    |        │ 🍽️ 점심 식사                    ≡│ |
|  ┌─────────────────────────────┐   |  14:00 └─────────────────────────────────┘ |
|  │ 단기 업무 추가...           │[+]|                                              |
|  └─────────────────────────────┘   |  15:00 ─────────────────────────────────── |
|                                    |                                              |
|  ─────────────────────────────────|  16:00 ─────────────────────────────────── |
|                                    |                                              |
|  📁 we:connect 프로젝트      ▼     |  17:00 ─────────────────────────────────── |
|    ☐ API 설계 문서 작성            |                                              |
|    ☐ 로그인 페이지 구현            |  18:00 ─────────────────────────────────── |
|    ☑ DB 스키마 설계 ──────────     |                                              |
|                                    |                                              |
|  📁 사내 워크숍 준비         ▼     |                                              |
|    ☐ 발표 자료 준비                |                                              |
|    ☐ 참석자 명단 정리              |                                              |
|                                    |                                              |
|  📌 단기 업무                      |                                              |
|    ☐ 점심 미팅 준비                |                                              |
|    ☐ 이메일 회신                   |                                              |
|                                    |                                              |
+-----------------------------------------------------------------------------------+
```

### 화면 구성 상세

#### 상단 헤더

- **페이지 타이틀**: "업무일지" + 설명 텍스트
- **Discord 전송 버튼**: 우측 상단 고정
- **날짜 네비게이션**: 이전/다음 날짜 이동
- **날짜 선택기**: 우측 달력 아이콘으로 날짜 직접 선택

#### 좌측 패널 - 체크리스트

- **드래그 안내**: "타임테이블로 드래그하세요" 힌트
- **프로젝트 업무 추가**:
  - 프로젝트 선택 드롭다운
  - 업무 내용 입력 + 추가 버튼
- **구분선**: "또는"
- **단기 업무 추가**: 프로젝트 없이 빠른 추가
- **프로젝트별 업무 그룹**:
  - 📁 프로젝트명 (접기/펼치기)
  - 하위 업무 체크리스트
  - 완료 시 취소선 처리
- **단기 업무 그룹**:
  - 📌 단기 업무 섹션
  - 프로젝트 미지정 업무 목록

#### 우측 패널 - 타임테이블

- **헤더**:
  - 🍅 아이콘 (뽀모도로/집중 모드 암시)
  - 공개/비공개 토글 뱃지
  - 통계: 기록 시간 / 휴식 시간 / 완료 시간
- **시간축**: 09:00 ~ 18:00 (1시간 단위)
- **업무 블록**:
  - 프로젝트 색상으로 구분
  - 드래그로 시간 조정 가능
  - 리사이즈 핸들 (≡)
- **점심 시간**: 기본 13:00-14:00 표시

### 데이터 모델

```typescript
// 체크리스트 아이템
ChecklistItem {
  id: string
  userId: string
  date: date
  content: string
  projectId: string | null    // null이면 단기 업무
  isCompleted: boolean
  order: number
  createdAt: datetime
}

// 타임테이블 블록
TimeBlock {
  id: string
  userId: string
  date: date
  startTime: time             // e.g., "09:00"
  endTime: time               // e.g., "10:30"
  content: string
  type: "WORK" | "BREAK" | "LUNCH"
  projectId: string | null    // 프로젝트 연결
  checklistItemId: string | null  // 체크리스트에서 온 경우
  isCompleted: boolean
}

// 일일 업무일지
DailyWorkLog {
  id: string
  userId: string
  date: date
  isPublic: boolean
  totalWorkHours: number
  totalBreakHours: number
  totalCompletedHours: number
  checklistItems: ChecklistItem[]
  timeBlocks: TimeBlock[]
}

// 프로젝트 요약 (업무일지용)
ProjectSummary {
  id: string
  name: string
  color: string               // 프로젝트 구분 색상
}
```

### API 엔드포인트

```
# 체크리스트
GET    /api/checklist?date={date}     - 체크리스트 조회 (프로젝트별 그룹핑)
POST   /api/checklist                 - 체크리스트 아이템 추가
       body: { content, projectId?, date }
PUT    /api/checklist/:id             - 아이템 수정
PUT    /api/checklist/:id/toggle      - 완료 토글
DELETE /api/checklist/:id             - 아이템 삭제
PUT    /api/checklist/reorder         - 순서 변경

# 타임테이블
GET    /api/timetable?date={date}     - 타임테이블 조회
POST   /api/timetable                 - 블록 추가
PUT    /api/timetable/:id             - 블록 수정 (시간, 내용)
DELETE /api/timetable/:id             - 블록 삭제
POST   /api/timetable/from-checklist  - 체크리스트에서 블록 생성

# 업무일지
GET    /api/worklog/daily?date={date} - 일일 통계 조회
PUT    /api/worklog/visibility        - 공개/비공개 설정
POST   /api/worklog/send-discord      - Discord로 전송

# 프로젝트 (업무일지용)
GET    /api/projects/summary          - 프로젝트 목록 (드롭다운용)
```

### 인터랙션 상세

| 인터랙션             | 동작                                                                  |
| -------------------- | --------------------------------------------------------------------- |
| 프로젝트 선택        | 드롭다운에서 프로젝트 선택 → 해당 프로젝트에 업무 추가                |
| 단기 업무 추가       | 프로젝트 없이 📌 단기 업무 섹션에 추가                                |
| 프로젝트 접기/펼치기 | 프로젝트명 클릭 시 하위 업무 토글                                     |
| 체크리스트 드래그    | 타임테이블 시간대에 드롭 → 해당 시간에 블록 생성 (프로젝트 색상 유지) |
| 블록 드래그          | 다른 시간대로 이동                                                    |
| 블록 리사이즈        | 상하 끝 드래그로 시간 조정                                            |
| 블록 클릭            | 내용 편집 모드                                                        |
| 체크박스 클릭        | 완료/미완료 토글                                                      |

---
