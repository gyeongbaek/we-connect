## 6. 예약 페이지

### 개요

방송실 및 강의실 시간대별 예약 관리

### 기능 요구사항

| 기능           | 설명                                   | 우선순위 |
| -------------- | -------------------------------------- | -------- |
| 예약 현황 조회 | 공간별/시간대별 예약 현황 한눈에 확인  | P0       |
| 예약 등록      | 빈 시간대 클릭하여 예약 등록           | P0       |
| 중복 예약 방지 | 겹치는 시간대 예약 시 불가 메시지 표시 | P0       |
| 예약자 확인    | 예약된 블록에서 예약자 정보 확인       | P0       |
| 예약 취소      | 본인 예약 취소 가능                    | P1       |
| 날짜 선택      | 날짜별 예약 현황 조회                  | P1       |

### 화면 와이어프레임

```
+-----------------------------------------------------------------------------------+
|  예약                                                                              |
|  방송실 및 강의실을 예약하세요                                                       |
+-----------------------------------------------------------------------------------+
|                                                                                   |
|  < 2025년 12월 9일 월요일 >                                    [2025. 12. 09. 📅] |
|                                                                                   |
|  공간:  [전체] [🎙️ 방송실1] [🎙️ 방송실2] [📚 강의실]                                |
|                                                                                   |
+-----------------------------------------------------------------------------------+
|                                                                                   |
|         |     🎙️ 방송실1      |     🎙️ 방송실2      |      📚 강의실       |
|  -------+--------------------+--------------------+--------------------+         |
|  09:00  |                    | ┌────────────────┐ |                    |         |
|         |                    | │ 📹 유튜브 촬영  │ |                    |         |
|  -------+                    | │ Licat          │ +--------------------+         |
|  10:00  | ┌────────────────┐ | │ 09:00-11:00    │ |                    |         |
|         | │ 🎧 팟캐스트 녹음 │ | └────────────────┘ |                    |         |
|  -------+ │ Ali            │ +--------------------+--------------------+         |
|  11:00  | │ 10:00-12:00    │ |                    | ┌────────────────┐ |         |
|         | └────────────────┘ |                    | │ 📖 Python 기초  │ |         |
|  -------+--------------------+--------------------+ │ Hati           │ +         |
|  12:00  |                    |                    | │ 11:00-13:00    │ |         |
|         |        점심        |        점심        | └────────────────┘ |         |
|  -------+--------------------+--------------------+--------------------+         |
|  13:00  |                    |                    |                    |         |
|         |                    |                    |                    |         |
|  -------+--------------------+ ┌────────────────┐ +--------------------+         |
|  14:00  | ┌────────────────┐ | │ 🎬 인터뷰 촬영  │ |                    |         |
|         | │ 🎙️ 라이브 방송  │ | │ Binky         │ |                    |         |
|  -------+ │ Sunny          │ | │ 14:00-16:00    │ +--------------------+         |
|  15:00  | │ 14:00-16:00    │ | │                │ | ┌────────────────┐ |         |
|         | │                │ | └────────────────┘ | │ 📖 React 심화   │ |         |
|  -------+ └────────────────┘ +--------------------+ │ Wade           │ +         |
|  16:00  |                    |                    | │ 15:00-18:00    │ |         |
|         |                    |                    | │                │ |         |
|  -------+--------------------+--------------------+ │                │ +         |
|  17:00  |                    |                    | │                │ |         |
|         |                    |                    | └────────────────┘ |         |
|  -------+--------------------+--------------------+--------------------+         |
|  18:00  |                    |                    |                    |         |
|         |                    |                    |                    |         |
+-----------------------------------------------------------------------------------+

범례:  ■ 예약됨 (클릭 시 상세)  □ 예약 가능 (클릭 시 등록)
```

### 예약 등록 모달 (빈 시간 클릭 시)

```
+-----------------------------------------------+
|  예약 등록                                [X]  |
+-----------------------------------------------+
|                                               |
|  공간                                         |
|  🎙️ 방송실1                                   |
|                                               |
|  날짜                                         |
|  2025년 12월 9일 (월)                          |
|                                               |
|  시간 *                                       |
|  +---------------+     +---------------+      |
|  | 14:00      ▼ |  ~  | 16:00      ▼ |      |
|  +---------------+     +---------------+      |
|                                               |
|  예약 제목 *                                   |
|  +---------------------------------------+    |
|  | 예: 팟캐스트 녹음, 유튜브 촬영 등       |    |
|  +---------------------------------------+    |
|                                               |
|  메모 (선택)                                   |
|  +---------------------------------------+    |
|  |                                       |    |
|  +---------------------------------------+    |
|                                               |
|  +-------------------+  +-------------------+ |
|  |      취소         |  |     예약하기      | |
|  +-------------------+  +-------------------+ |
+-----------------------------------------------+
```

### 중복 예약 시 에러 모달

```
+-----------------------------------------------+
|  ⚠️ 예약 불가                             [X]  |
+-----------------------------------------------+
|                                               |
|  선택하신 시간대에 이미 예약이 있습니다.         |
|                                               |
|  충돌 예약 정보:                               |
|  ┌───────────────────────────────────────┐   |
|  │ 🎙️ 방송실1                             │   |
|  │ 14:00 - 16:00                         │   |
|  │ 라이브 방송 - Sunny                    │   |
|  └───────────────────────────────────────┘   |
|                                               |
|  다른 시간대를 선택해주세요.                    |
|                                               |
|              +-------------------+            |
|              |       확인        |            |
|              +-------------------+            |
+-----------------------------------------------+
```

### 예약 상세 모달 (예약된 블록 클릭 시)

```
+-----------------------------------------------+
|  예약 상세                                [X]  |
+-----------------------------------------------+
|                                               |
|  🎙️ 방송실1                                   |
|                                               |
|  📹 유튜브 촬영                                |
|                                               |
|  📅 2025년 12월 9일 (월)                       |
|  ⏰ 09:00 - 11:00 (2시간)                      |
|                                               |
|  👤 예약자                                     |
|  ┌───────────────────────────────────────┐   |
|  │ (L) Licat                              │   |
|  │     DA · 콘텐츠팀                       │   |
|  └───────────────────────────────────────┘   |
|                                               |
|  📝 메모                                      |
|  신제품 소개 영상 촬영 예정                     |
|                                               |
|  +-------------------+  +-------------------+ |  ← 본인 예약인 경우만 표시
|  |    예약 취소       |  |       닫기        | |
|  +-------------------+  +-------------------+ |
+-----------------------------------------------+
```

### 데이터 모델

```typescript
// 공간
Room {
  id: string
  name: string              // "방송실1", "방송실2", "강의실"
  type: "STUDIO" | "CLASSROOM"
  description: string
}

// 예약
Reservation {
  id: string
  roomId: string
  userId: string
  date: date
  startTime: time           // "09:00"
  endTime: time             // "11:00"
  title: string
  memo: string | null
  createdAt: datetime
}

// 예약 상세 (조회용)
ReservationDetail {
  id: string
  room: Room
  user: {
    id: string
    nickname: string
    initial: string
    role: string
  }
  date: date
  startTime: time
  endTime: time
  title: string
  memo: string | null
  isOwner: boolean          // 본인 예약 여부
}

// 일일 예약 현황
DailyReservationView {
  date: date
  rooms: Room[]
  reservations: ReservationDetail[]
}
```

### API 엔드포인트

```
# 공간
GET    /api/rooms                       - 공간 목록 조회

# 예약
GET    /api/reservations                - 예약 목록 조회
       ?date={date}                     - 날짜 필터
       &roomId={roomId}                 - 공간 필터
POST   /api/reservations                - 예약 등록
       body: { roomId, date, startTime, endTime, title, memo? }
GET    /api/reservations/:id            - 예약 상세 조회
DELETE /api/reservations/:id            - 예약 취소 (본인만)

# 예약 가능 여부 확인
POST   /api/reservations/check          - 중복 예약 확인
       body: { roomId, date, startTime, endTime }
       response: { available: boolean, conflicts: Reservation[] }
```

### 인터랙션 상세

| 인터랙션        | 동작                                            |
| --------------- | ----------------------------------------------- |
| 빈 시간대 클릭  | 예약 등록 모달 열기 (해당 공간, 시간 자동 입력) |
| 예약 블록 클릭  | 예약 상세 모달 열기                             |
| 예약 블록 hover | 예약 제목, 예약자 툴팁 표시                     |
| 시간 선택       | 30분 단위 드롭다운                              |
| 예약하기 클릭   | 중복 확인 → 성공 시 등록 / 실패 시 에러 모달    |
| 예약 취소       | 본인 예약만 취소 가능, 확인 모달 후 삭제        |
| 공간 필터       | 선택한 공간만 표시                              |
| 날짜 이동       | 해당 날짜의 예약 현황 조회                      |

### 비즈니스 규칙

| 규칙      | 설명                               |
| --------- | ---------------------------------- |
| 예약 단위 | 30분 단위로 예약 가능              |
| 운영 시간 | 09:00 ~ 21:00                      |
| 최소 예약 | 30분 이상                          |
| 최대 예약 | 4시간 이내                         |
| 중복 예약 | 동일 공간, 겹치는 시간대 예약 불가 |
| 예약 취소 | 본인만 가능, 시작 1시간 전까지     |
